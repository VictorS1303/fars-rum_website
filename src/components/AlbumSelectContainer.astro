---
import Albums from './Albums.astro'
---

<div class="container album-select-container">
    <Albums/>
</div>


<style>
    .container.album-select-container
    {
        position: absolute;
        top: 88%;
        height: 50px;
        width: 275px;
    }

   
</style>

<script>
    const albumSelectContainer = document.querySelector('.album-select-container')
    const albumImages = document.querySelectorAll('.album-image')
    const currentAlbumImage = document.querySelector('#current_album_image') as HTMLImageElement
   
    albumSelectContainer.addEventListener('click', (e) => selectAlbum(e))

    // Select Album
    function selectAlbum(e: any)
    {
        if(e.target.matches('.album-image'))
        {            
            updateCurrentAlbumImage(e)
        }
    }

    // Update Current Album Image
    function updateCurrentAlbumImage(e: any)
    {
        const srcParts = e.target.src.split('/')
        const fileName = srcParts[srcParts.length - 1]
        currentAlbumImage.src = `/album_covers/${fileName}`
        updateCurrentAlbumMiniatureImage(e)
    }

    // Update Current Album Miniature Image
    function updateCurrentAlbumMiniatureImage(e: any)
    {
        if(e.target.matches('.album-image'))
        {
            albumImages.forEach((albumImage) => albumImage.style.border = null)
            e.target.style.border = '2px solid var(--border-color)'
        }
    }

    
</script>